var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function o(e){e.forEach(t)}function r(e){return"function"==typeof e}function i(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function u(e,t){e.appendChild(t)}function s(e){return document.createElement(e)}function c(e){return document.createTextNode(e)}function a(){return c(" ")}function l(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function d(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function f(e,t){(null!=t||e.value)&&(e.value=t)}let p;function v(e){p=e}const h=[],_=[],g=[],x=[],y=Promise.resolve();let b=!1;function m(e){g.push(e)}let $=!1;const k=new Set;function w(){if(!$){$=!0;do{for(let e=0;e<h.length;e+=1){const t=h[e];v(t),E(t.$$)}for(h.length=0;_.length;)_.pop()();for(let e=0;e<g.length;e+=1){const t=g[e];k.has(t)||(k.add(t),t())}g.length=0}while(h.length);for(;x.length;)x.pop()();b=!1,$=!1,k.clear()}}function E(e){if(null!==e.fragment){e.update(),o(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(m)}}const A=new Set;function B(e,t){-1===e.$$.dirty[0]&&(h.push(e),b||(b=!0,y.then(w)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function M(i,u,s,c,a,l,d=[-1]){const f=p;v(i);const h=u.props||{},_=i.$$={fragment:null,ctx:null,props:l,update:e,not_equal:a,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:[]),callbacks:n(),dirty:d};let g=!1;var x,y;_.ctx=s?s(i,h,(e,t,...n)=>{const o=n.length?n[0]:t;return _.ctx&&a(_.ctx[e],_.ctx[e]=o)&&(_.bound[e]&&_.bound[e](o),g&&B(i,e)),t}):[],_.update(),g=!0,o(_.before_update),_.fragment=!!c&&c(_.ctx),u.target&&(u.hydrate?_.fragment&&_.fragment.l(function(e){return Array.from(e.childNodes)}(u.target)):_.fragment&&_.fragment.c(),u.intro&&((x=i.$$.fragment)&&x.i&&(A.delete(x),x.i(y))),function(e,n,i){const{fragment:u,on_mount:s,on_destroy:c,after_update:a}=e.$$;u&&u.m(n,i),m(()=>{const n=s.map(t).filter(r);c?c.push(...n):o(n),e.$$.on_mount=[]}),a.forEach(m)}(i,u.target,u.anchor),w()),v(f)}var N="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function D(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function L(e,t){return e(t={exports:{}},t.exports),t.exports}var T=L((function(e,t){var n=N&&N.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function u(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(u,s)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});t.IndexedKv=class{constructor(e="indexed_db",t="kvs"){this.DB_NAME="unikki_db",this.TABLE_NAME="kvs",this.DB_NAME=e,this.TABLE_NAME=t}getDB(){return new Promise((e,t)=>{const n=indexedDB.open(this.DB_NAME,1);n.onerror=t,n.onupgradeneeded=()=>{n.result.createObjectStore(this.TABLE_NAME,{keyPath:"key"}).createIndex(this.TABLE_NAME,["key","value"])},n.onsuccess=()=>e(n.result)})}getStore(e,t){return e.transaction([this.TABLE_NAME],t).objectStore(this.TABLE_NAME)}closeDB(){}set(e,t){return new Promise(o=>n(this,void 0,void 0,(function*(){const n=yield this.getDB();this.getStore(n,"readwrite").put({key:e,value:t}).onsuccess=()=>{n.close(),o()}})))}get(e){return new Promise(t=>n(this,void 0,void 0,(function*(){const n=yield this.getDB(),o=this.getStore(n,"readonly").get(e);o.onsuccess=()=>{n.close(),t(o.result?o.result.value:"")}})))}}}));D(T);T.IndexedKv;var K=L((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.IndexedKv=T.IndexedKv}));D(K);var P=K.IndexedKv;function j(t){let n,r,i,p,v,h,_,g,x,y,b,m,$,k,w,E,A,B,M,N,D,L;return{c(){n=s("main"),r=s("h1"),r.textContent="Indexed KV sample",i=a(),p=s("div"),v=s("div"),h=s("div"),h.textContent="key:",_=a(),g=s("input"),x=a(),y=s("div"),b=s("div"),b.textContent="value:",m=a(),$=s("input"),k=a(),w=s("button"),w.textContent="反映",E=a(),A=s("div"),B=c("indexedDB value: "),M=c(t[2]),N=a(),D=s("p"),D.innerHTML='\n    indexed KV のサンプルです。 indexed KV は、indexedDBを Key Value Store\n    のように扱うライブラリです。\n    <br>\n    keyを変更するごとに、indexedDBから該当するキーを探し、 あればindexed-db\n    valueを返却します。\n    <br>\n    キーがなければnullとなります。\n    <br> \n    <br>\n    また、反映を押すことで、該当のkeyのvalueを更新します。\n    <br> \n    <br> \n    <a target="_brank" href="https://github.com/tkdalic/indexed-kv">github URL</a> \n    <a target="_brank" href="https://www.npmjs.com/package/indexed-kv">npm URL</a>',d(h,"class","input__label svelte-1fe95hv"),d(g,"class","input__text svelte-1fe95hv"),d(g,"type","text"),d(v,"class","indexed-kv__key input svelte-1fe95hv"),d(b,"class","input__label svelte-1fe95hv"),d($,"class","input__text svelte-1fe95hv"),d($,"type","text"),d(y,"class","indexed-kv__value input svelte-1fe95hv"),d(w,"class","indexed-kv__button"),d(A,"class","indexed-kv__outpupt"),d(p,"class","indexed-kv svelte-1fe95hv"),d(D,"class","description"),d(n,"class","main svelte-1fe95hv")},m(e,o){!function(e,t,n){e.insertBefore(t,n||null)}(e,n,o),u(n,r),u(n,i),u(n,p),u(p,v),u(v,h),u(v,_),u(v,g),f(g,t[0]),u(p,x),u(p,y),u(y,b),u(y,m),u(y,$),f($,t[1]),u(p,k),u(p,w),u(p,E),u(p,A),u(A,B),u(A,M),u(n,N),u(n,D),L=[l(g,"input",t[6]),l(g,"change",t[4]),l($,"input",t[7]),l(w,"click",t[3])]},p(e,[t]){1&t&&g.value!==e[0]&&f(g,e[0]),2&t&&$.value!==e[1]&&f($,e[1]),4&t&&function(e,t){t=""+t,e.data!==t&&(e.data=t)}(M,e[2])},i:e,o:e,d(e){var t;e&&(t=n).parentNode.removeChild(t),o(L)}}}function S(e,t,n){const o=new P;let r,i,u="";function s(){o.get(r).then(e=>n(2,u=e))}return[r,i,u,async function(){await o.set(r,i),s()},s,o,function(){r=this.value,n(0,r)},function(){i=this.value,n(1,i)}]}return new class extends class{$destroy(){!function(e,t){const n=e.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}}{constructor(e){super(),M(this,e,S,j,i,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
